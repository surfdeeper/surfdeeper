---
interface CommitItem {
  hash: string;
  date: string;
  isoDate: string;
  message: string;
  url: string;
}

const { items, max = 3 } = Astro.props as { items: CommitItem[]; max?: number };
---

{
  items.length > 0 && (
    <div class="card updates-section">
      <h3>ðŸ”¨ Recent Commits</h3>
      <ul class="updates-list">
        {items.slice(0, max).map((commit) => (
          <li class="update-item">
            <a
              href={commit.url}
              target="_blank"
              rel="noopener noreferrer"
              class="update-link commit-link"
            >
              {commit.message.length > 60
                ? commit.message.substring(0, 60) + "..."
                : commit.message}
            </a>
            <span class="update-date">
              {new Date(commit.isoDate).toLocaleString("en-US", {
                timeZone: "America/Los_Angeles",
                month: "short",
                day: "numeric",
                year: "numeric",
                hour: "numeric",
                minute: "2-digit",
                hour12: true,
                timeZoneName: "short",
              })}
            </span>
          </li>
        ))}
      </ul>
    </div>
  )
}
